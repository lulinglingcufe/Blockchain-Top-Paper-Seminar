各位同学好，今天我要讲的是数据库A类会议 SIGMOD 2017
上的论文BLOCKBENCH: A Framework for Analyzing Private Blockchains
文章提出了一种私有区块链的评测框架。


首先介绍一下区块链的背景知识，这里我们主要关注私有链。
然后介绍设计这该测体系的设计动机和挑战。并介绍该框架。

接下来对比了三大平台：hyperLedger fabric、以太坊和parity在此框架下的性能测试。
并讨论测试发现的一些问题
最后做出结论。

Bitcoin是一个点对点的虚拟货币系统，2009年由中本聪提出。最大的特点是没有货币发行者。
具有匿名性和分布式特点。

从技术的角度来说，区块链是其底层技术。实际上是一个分布式共享账本，意味着在每个参与者那里都有一个副本。
使用了加密算法、共识协议和智能合约。

智能合约是储存在区块链中的用户自定义的合约协议。


（跳到19页）区块链的4要素：分布式账本、密码算法、共识与智能合约。

分布式公共账本由一系列数据节点组成。节点将交易打包成块。
随着时间的推移，这些块将串成一个链，所以就叫区块链。
每个节点都有当前账本的一份副本。所以任何一个节点的失效都不会造成整个系统数据丢失。

密码算法可以保证数据的完整性。以防双花攻击。就是用户想把一个币花两次。
关键技术是用哈希指针将块前后链接起来。区块里包含前一个块的哈希，所以如果篡改区块内容
，后面区块的哈希都会跟着变。这很容易检测，因此区块链具有不可篡改性。

共识协议

区块链的状态

智能合约是可以附加在区块交易上的逻辑


为了解私有链的性能，需要设计一个通用的测试框架，来看区块链能在何种程度上处理数据。
该框架可以帮助开发者根据应用需求选择平台。识别潜在的性能瓶颈。

数据库有很多测试。但现在还没有针对私有链的测试，所以这是本文的创新。
现在介绍BLOCKBENCH的技术细节。
第一个挑战是区块链系统由很多部分组成。不同的平台对于每个部分的设计选择也不一样。
因此我们将区块链设计抽象出三个层次——共识层，执行层和数据模型层。结合区块链的工作栈来看。
共识层包括工作量证明、pbft等协议。执行层是智能合约的执行引擎，以太坊是用EVM虚拟机，fabric用docker容器。
数据模型层，以太坊用的是leveldb，fabric用的是rockdb，存储世界状态、账户信息等等。

第二个挑战是平台的选择。现有的区块链底层平台非常多，仅仅比特币就有超过200个变种。本文选取了现在有着相对成熟的设计实现和用户群基础的
hyperLedger fabric、以太坊和parity来进行测试。该框架也是通用的，后续可以测试其他区块链平台。

第三个挑战是在区块链平台上缺少面向数据库的工作负载。本文将区块链看做一个键值对存储。
它采用引擎通过智能合约来实现交易和分析功能。
在该框架中设计并测试了交易分析的工作负载。

这是一个整体设计图，将区块链作为一个黑盒，用宏观测试工作负载 测试整体性能。
对于每个层次都设计了至少一个微观测试工作负载 来压力测试它。
执行层有CPUHeavy。数据模型层有IOHeavy和对历史数据的分析的Analytics负载。
共识层提供的负载就只是发起交易，而不做其他事。
41 该表是现在设计的工作负载。总体分为宏观测试和微观测试负载。
38 这个是现在的软件栈。是一个灵活、可扩展的框架。
用iblockchainconnector 将平台链接到后端。 



